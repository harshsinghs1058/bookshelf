import{j as I,R as C,r as h,u as k,a as B,f as b,N as A,b as O,B as P,c as U,d as v,e as L}from"./vendor.fb339693.js";const F=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}};F();const e=I.exports.jsx,a=I.exports.jsxs,j=C.createContext(void 0),M=({children:t})=>{const[o,i]=h.exports.useState({isSignedIn:!1,uid:""});h.exports.useEffect(()=>{const r=localStorage.getItem("bookshelfAuth");if(r){const f=JSON.parse(r);f.isSignedIn&&i(f)}},[]);const l=[o,r=>{i({isSignedIn:!0,uid:r})},()=>{i({isSignedIn:!1,uid:""})}];return e(j.Provider,{value:l,children:t})},p=()=>{const t=h.exports.useContext(j);if(t===void 0)throw new Error("you can only use useAuth inside AuthContext.Provider");return t};function y(){const[t,o]=h.exports.useState(window.innerWidth),[i,s,n]=p();window.addEventListener("resize",()=>o(window.innerWidth));const l=k(),r=()=>{localStorage.setItem("bookshelfAuth",JSON.stringify({isSignedIn:!1,uid:""})),n(),l("/bookshelf/signIn")};return a("div",{className:"bg-black text-white items-center flex justify-between h-16 w-screen px-20 fixed top-0",children:[e("div",{className:"font-bold text-2xl md:text-4xl cursor-pointer",onClick:()=>l("/bookshelf"),children:"BookShelf"}),t>768-768?e("div",{children:e(f,{})}):e("div",{children:"phone"})]});function f(){return a("div",{className:"flex text-xl",children:[e("div",{className:"cursor-pointer mx-5 hover:bg-gray-500 rounded-xl px-5 py-2",onClick:()=>l("/bookshelf/CreateNewBook"),children:"Add Book"}),e("div",{className:"cursor-pointer mx-5 hover:bg-gray-500 rounded-xl px-5 py-2",onClick:r,children:"Sign Out"})]})}}var N="/bookshelf/assets/loading_gif.7c4404e9.gif";const R={title:"",thumbnailUrl:"",desc:"",book:""},D=t=>{let o={};return t.title.length==0&&(o.title="Required"),t.thumbnailUrl.length==0&&(o.thumbnailUrl="Required"),t.desc.length==0&&(o.desc="Required"),t.book.length==0&&(o.book="Required"),o};function V(){const t=B({initialValues:R,validate:D}),[o,i]=h.exports.useState(!1),[s,n]=h.exports.useState(!1),[l,r,f]=p(),w=k(),g=async c=>{if(c.preventDefault(),n(!0),!(t.errors.title||t.errors.desc||t.errors.thumbnailUrl||t.errors.book)){i(!0);let u=W(t.values.book);for(var d=[],x=0;x<u.size();x++)d.push(0);await b.firestore().collection(l.uid).doc().set({title:t.values.title,desc:t.values.desc,thumbnailUrl:t.values.thumbnailUrl,book:u,bookmarks:d}).then(m=>{console.log(m),w("/bookshelf",{replace:!0})}),i(!1)}};return a("div",{className:"flex flex-col items-center w-full mt-20",children:[e(y,{className:"h-20"}),e("div",{className:"w-full text-4xl font-bold flex justify-center items-center h-20 ",children:"Add New Book"}),a("div",{className:"ml-10 items-start flex flex-col w-60%",children:[e("div",{className:"text-2xl mb-2 ml-3",children:"Title"}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-7",children:e("input",{type:"text",placeholder:"Book Title",className:" text-2xl m-1 ml-3 outline-none w-full ",formNoValidate:!0,name:"title",onChange:t.handleChange,value:t.values.title,onBlur:t.handleBlur,autoFocus:!0})}),e("div",{className:"text-red-600 ml-4",children:t.errors.title}),e("div",{className:"text-2xl mb-2 ml-3",children:"Thumbnail URL"}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-7",children:e("input",{type:"url",placeholder:"Thumbnail URL",className:" text-2xl m-1 ml-3 outline-none w-full ",name:"thumbnailUrl",onChange:t.handleChange,value:t.values.thumbnailUrl,onBlur:t.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:t.errors.thumbnailUrl}),e("div",{className:"text-2xl mb-2 ml-3",children:"Description"}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-5",children:e("textarea",{className:" text-2xl m-1 ml-3 outline-none w-full",placeholder:"Description",name:"desc",maxLength:100,onChange:t.handleChange,value:t.values.desc,onBlur:t.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:t.errors.desc}),a("div",{className:"text-2xl mb-2 ml-3",children:["Book Content"," ",e("span",{className:"text-xl",children:"wrap chapter name with ```"})]}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-5",children:e("textarea",{className:" text-2xl m-1 ml-3 outline-none w-full ",placeholder:"Book Content (wrap chapter name with in ``` comas)",name:"book",onChange:t.handleChange,value:t.values.book,onBlur:t.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:t.errors.book})]}),e("div",{className:"text-2xl my-4 px-10 font-bold  bg-gray-500 hover:bg-black py-4 rounded-lg  w-1/5 text-white text-center",onClick:g,children:o?e("img",{src:N,height:"34px",width:"34px",alt:"loading",className:"mx-auto"}):"Add Book"})]})}const W=t=>{var o=[],i="",s="";let n=!1;for(let l=0;l<t.length;l++)t[l]==="`"&&t[l+1]==="`"&&t[l+2]==="`"?(n===!1?(n=!0,i!==""&&(o.push({content:s,chapterHeading:i}),i="",s="")):n=!1,l+=2):n?i+=t[l]:s+=t[l];return o.push({content:s,chapterHeading:i}),o},z={email:"",password:"",confirmPassword:""},T=t=>{let o={};const i=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.email.trim()?i.test(t.email.trim())||(o.email="Invalid email"):o.email="Email is required",t.password.length<8&&(o.password="Min length is 8"),t.confirmPassword.length<8?o.confirmPassword="Min length is 8":t.confirmPassword!==t.password&&(o.confirmPassword="MisMatch Password"),o};function $(){const[t,o,i]=p(),[s,n]=h.exports.useState(window.screen.width),l=k(),r=B({initialValues:z,validate:T}),[f,w]=h.exports.useState(!1),[g,c]=h.exports.useState(!1);window.addEventListener("resize",()=>{n(window.innerWidth)});const d=async x=>{x.preventDefault(),w(!0),r.errors.email||r.errors.password||r.errors.confirmPassword||(c(!0),await b.auth().createUserWithEmailAndPassword(r.values.email.trim(),r.values.password).then(u=>{var m=u.user;localStorage.setItem("bookshelfAuth",JSON.stringify({isSignedIn:!0,uid:m.multiFactor.user.uid})),o(m.multiFactor.user.uid),l("/bookshelf/books",{replace:!0})}).catch(u=>{console.log(u);var m=u.code,S=u.message;alert(m+" "+S)}),c(!1))};return e("div",{className:"w-screen h-screen flex justify-center items-center bg-green-700",children:a("div",{className:"flex w-5/6 h-5/6 bg-white rounded-3xl justify-center",children:[s>768&&e("div",{className:"bg-yellow-500 w-1/2 flex flex-col items-start justify-center rounded-l-3xl",children:a("div",{className:"mx-auto w-90%",children:[a("div",{className:"lg:text-6xl text-white md:text-4xl",children:[e("span",{className:"font-bold",children:"MY "}),"BookShelf"]}),e("div",{children:"Its not just a E-BookShelf ,its a way to wide breadth of information, experience, and knowledge."})]})}),a("div",{className:"flex flex-col items-center md:w-1/2 w-full h-full py-10 justify-evenly",children:[e("h1",{className:"font-bold text-4xl",children:"Create Account"}),a("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"email",placeholder:"E-Mail",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"email",onChange:r.handleChange,value:r.values.email,onBlur:r.handleBlur,autoFocus:!0})}),e("div",{className:"text-red-600 ml-4",children:f||r.touched.email?r.errors.email:""})]}),a("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"password",placeholder:"Password",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"password",onChange:r.handleChange,value:r.values.password,onBlur:r.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:f||r.touched.password?r.errors.password:""})]}),a("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"text",placeholder:"Confirm Password",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"confirmPassword",onChange:r.handleChange,value:r.values.confirmPassword,onBlur:r.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:f||r.touched.confirmPassword?r.errors.confirmPassword:""})]}),e("div",{className:"rounded-2xl bg-yellow-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer w-2/5 text-center",onClick:d,children:g?e("img",{src:N,height:"34px",width:"34px",alt:"loading",className:"mx-auto"}):"Sign Up"}),e("hr",{className:"border-t-2 border-gray-500 my-3 h-1 w-9/12"}),e("div",{className:"rounded-2xl bg-blue-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer w-2/5 text-center",onClick:()=>l("/bookshelf/signIn"),children:"Sign in"})]})]})})}const q={email:"",password:""},J=t=>{let o={};const i=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.email.trim()?i.test(t.email.trim())||(o.email="Invalid email"):o.email="Email is required",t.password.length<8&&(o.password="Min length is 8"),o};function H(){const[t,o]=h.exports.useState(window.screen.width),i=k(),[s,n]=h.exports.useState(!1),l=B({initialValues:q,validate:J}),[r,f]=h.exports.useState(!1),[w,g,c]=p();window.addEventListener("resize",()=>{o(window.innerWidth)});const d=async x=>{x.preventDefault(),f(!0),l.errors.email||l.errors.password||(n(!0),await b.auth().signInWithEmailAndPassword(l.values.email.trim(),l.values.password).then(u=>{var m=u.user;localStorage.setItem("bookshelfAuth",JSON.stringify({isSignedIn:!0,uid:m.multiFactor.user.uid})),g(m.multiFactor.user.uid),i("/bookshelf/books",{replace:!0})}).catch(u=>{var m=u.code,S=u.message;alert(m+" "+S)}),n(!1))};return e("div",{className:"w-screen h-screen flex justify-center items-center bg-green-700",children:a("div",{className:"flex w-5/6 h-5/6 bg-white rounded-3xl justify-center",children:[t>768&&e("div",{className:"bg-yellow-500 w-1/2 flex flex-col items-start justify-center rounded-l-3xl",children:a("div",{className:"mx-auto w-90%",children:[a("div",{className:"lg:text-6xl text-white md:text-4xl",children:[e("span",{className:"font-bold",children:"MY "}),"BookShelf"]}),e("div",{children:"Its not just a E-BookShelf ,its a way to wide breadth of information, experience, and knowledge."})]})}),a("div",{className:"flex flex-col items-center md:w-1/2 w-full h-full py-10 justify-evenly",children:[e("h1",{className:"font-bold text-4xl",children:"Welcome Back"}),a("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"email",placeholder:"E-Mail",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"email",onChange:l.handleChange,value:l.values.email,onBlur:l.handleBlur,autoFocus:!0})}),e("div",{className:"text-red-600 ml-4",children:r||l.touched.email?l.errors.email:""})]}),a("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"password",placeholder:"Password",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"password",onChange:l.handleChange,value:l.values.password,onBlur:l.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:r||l.touched.password?l.errors.password:""})]}),e("div",{className:"rounded-2xl bg-yellow-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer w-2/5 text-center",onClick:d,children:s?e("img",{src:N,height:"34px",width:"34px",alt:"loading",className:"mx-auto"}):"Sign In"}),e("hr",{className:"border-t-2 border-gray-500 my-3 h-1 w-9/12"}),e("div",{className:"rounded-2xl bg-blue-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer text-center w-2/5",onClick:()=>i("/bookshelf/signUp"),children:"Sign Up"})]})]})})}function Z({data:t}){const o=k();return a("div",{className:"m-5 w-80 rounded-2xl overflow-hidden shadow-2xl border-2 border-black flex flex-col items-center justify-start pt-2 transform hover:scale-105 ",children:[e("div",{className:"h-50v w-11/12 flex justify-center",children:e("img",{className:"max-w-full max-h-full rounded-lg",src:t.data.thumbnailUrl,alt:"Sunset in the mountains",height:"300px"})}),a("div",{className:"px-6 py-4 w-full",children:[e("div",{className:"font-bold text-xl mb-2",children:String(t.data.title).substring(0,22)+"..."}),e("p",{className:"text-gray-700 text-sm break-all w-90%",children:String(t.data.desc).substring(0,100)+"..."}),e("div",{className:"flex justify-evenly mt-4",children:e("button",{className:"text-sm font-bold hover:text-white bg-green-400 py-4 rounded-lg  hover:bg-green-700 w-90%",onClick:()=>o(`/bookshelf/book/${t.id}`),children:"READ \u25BA"})})]})]})}async function _(t){return(await b.firestore().collection(t).get()).docs.map(i=>({id:i.id,data:i.data()}))}function K(){const[t,o,i]=p(),[s,n]=h.exports.useState("loading"),l=t.uid;return h.exports.useEffect(()=>{l&&_(t.uid).then(r=>{n(r)})},[l]),a("div",{className:"mt-20",children:[e(y,{}),s==="loading"?e("div",{className:"h-80v w-full grid justify-center items-center",children:e("img",{src:N,alt:"loading",height:"200px",width:"200px"})}):s.length>0?e("div",{className:"flex flex-shrink-0 justify-center flex-wrap ",children:s.map(r=>e(Z,{data:r},r.id))}):a("div",{className:"flex flex-col items-center font-bold justify-center absolute top-16 w-full bottom-0 text-4xl",children:["Empty",e("span",{className:" inline font-normal",children:"try adding some books"})]})]})}function Y(){const t=localStorage.getItem("bookshelfAuth");return t&&JSON.parse(t).isSignedIn?e(A,{to:"Books"}):e(A,{to:"/sign-in"})}var X="/bookshelf/assets/bookmark.0f0f9df9.png",G="/bookshelf/assets/bookmark-yellow.0a0f62b8.png";async function E(t,o){return(await b.firestore().collection(t).doc(o).get()).data()}function Q(){const[t,o,i]=p(),[s,n]=h.exports.useState("loading"),{bookId:l}=O(),r=t.uid;let f=1;h.exports.useEffect(()=>(r&&l&&E(r,l).then(c=>{n(c),console.log(c)}),!1),[r,f]);const w=async c=>{const d=document.getElementById(l+c+"c");d&&(d.style.backgroundColor==="rgb(248, 255, 0)"?(s.bookmarks[c]=0,b.firestore().collection(r).doc(l).update({bookmarks:s.bookmarks})):(s.bookmarks[c]=1,b.firestore().collection(r).doc(l).update({bookmarks:s.bookmarks})),E(r,l).then(x=>{n(x)}))},g=document.documentElement.clientHeight;return window.addEventListener("scroll",()=>{s.book&&s.book.map((c,d)=>{const x=document.getElementById(l+d+"h"),u=document.getElementById(l+d+"hs");if(x&&u){const m=x.getBoundingClientRect().y;g>m&&m>-210?u.style.fontWeight="bold":u.style.fontWeight="normal"}})}),e("div",{children:s==="loading"?e("div",{className:"h-80v w-full grid justify-center items-center",children:e("img",{src:N,alt:"loading",height:"200px",width:"200px"})}):s?a("div",{className:"mt-20",children:[e(y,{}),a("div",{className:"w-screen",children:[a("div",{className:"w-1/4 m-4 fixed break-all",children:[e("div",{className:"cursor-pointer bg-gray-400 px-10 ml-4 mr-4 rounded-xl py-2 text-center text-xl font-bold text-white hover:bg-black",children:"BookMarks"}),s.book.map((c,d)=>e("div",{className:"mt-4 ml-4 text-xl",id:l+d+"hs",children:c.chapterHeading},l+d+"hs"))]}),a("div",{className:"w-1/2 mx-auto",children:[e("img",{src:s.thumbnailUrl,className:"mt-4 ml-4"}),e("div",{className:"mt-4 ml-4 font-bold break-all text-2xl",children:s.title}),e("div",{className:"mt-4 ml-4 text-xl break-all",children:s.desc}),e("div",{className:"mt-2 mb-4",children:s.book.map((c,d)=>a("div",{children:[a("div",{className:"flex justify-between items-center",children:[e("div",{className:"mt-4 ml-4 font-bold text-xl",id:l+d+"h",children:c.chapterHeading}),e("div",{children:e("img",{src:s.bookmarks[d]===0?X:G,alt:"bookmark",height:"20px",width:"20px",onClick:()=>{w(d)}})})]}),e("div",{className:"mt-4 ml-4",id:l+d+"c",style:{backgroundColor:s.bookmarks[d]?"#F8FF00":"white"},children:c.content})]},l+d))})]})]})]}):a("div",{children:[e(y,{}),e("div",{className:"flex flex-col items-center font-bold justify-center absolute top-16 w-full bottom-0 text-4xl",children:"No Book Found"})]})})}b.initializeApp({apiKey:"AIzaSyAC_pfgTeBv5eX-SAryBBV2hMm7t9nfbSo",authDomain:"bookshelf-7f547.firebaseapp.com",projectId:"bookshelf-7f547",storageBucket:"bookshelf-7f547.appspot.com",messagingSenderId:"37943744380",appId:"1:37943744380:web:beec8e86828960d25a36f9"});b.auth();function ee(){return p(),e("div",{children:e(P,{children:a(U,{children:[e(v,{exact:!0,path:"/bookshelf/",element:e(Y,{})}),e(v,{exact:!0,path:"/bookshelf/Books",element:e(K,{})}),e(v,{exact:!0,path:"/bookshelf/SignUp",element:e($,{})}),e(v,{exact:!0,path:"/bookshelf/SignIn",element:e(H,{})}),e(v,{exact:!0,path:"/bookshelf/CreateNewBook",element:e(V,{})}),e(v,{exact:!0,path:"/bookshelf/book/:bookId",element:e(Q,{})})]})})})}L.render(e(C.StrictMode,{children:e(M,{children:e(ee,{})})}),document.getElementById("root"));
