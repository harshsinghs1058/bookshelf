import{j as I,R as A,r as h,u as N,a as B,f as x,N as j,b as P,B as U,c as L,d as k,e as M}from"./vendor.fb339693.js";const F=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function d(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=d(a);fetch(a.href,l)}};F();const e=I.exports.jsx,i=I.exports.jsxs,E=A.createContext(void 0),R=({children:t})=>{const[r,d]=h.exports.useState({isSignedIn:!1,uid:""});h.exports.useEffect(()=>{const o=localStorage.getItem("bookshelfAuth");if(o){const c=JSON.parse(o);c.isSignedIn&&d(c)}},[]);const l=[r,o=>{d({isSignedIn:!0,uid:o})},()=>{d({isSignedIn:!1,uid:""})}];return e(E.Provider,{value:l,children:t})},v=()=>{const t=h.exports.useContext(E);if(t===void 0)throw new Error("you can only use useAuth inside AuthContext.Provider");return t};function S(){const[t,r]=h.exports.useState(window.innerWidth),[d,s,a]=v();window.addEventListener("resize",()=>r(window.innerWidth));const l=N(),o=()=>{localStorage.setItem("bookshelfAuth",JSON.stringify({isSignedIn:!1,uid:""})),a(),l("/bookshelf/signIn")};return i("div",{className:"bg-black text-white items-center flex justify-between h-16 w-screen px-20 fixed top-0",children:[e("div",{className:"font-bold text-2xl md:text-4xl cursor-pointer",onClick:()=>l("/bookshelf"),children:"BookShelf"}),t>768-768?e("div",{children:e(c,{})}):e("div",{children:"phone"})]});function c(){return i("div",{className:"flex text-xl",children:[e("div",{className:"cursor-pointer mx-5 hover:bg-gray-500 rounded-xl px-5 py-2",onClick:()=>l("/bookshelf/CreateNewBook"),children:"Add Book"}),e("div",{className:"cursor-pointer mx-5 hover:bg-gray-500 rounded-xl px-5 py-2",onClick:o,children:"Sign Out"})]})}}var y="/bookshelf/assets/loading_gif.7c4404e9.gif";const D={title:"",thumbnailUrl:"",desc:"",book:""},V=t=>{let r={};return t.title.length==0&&(r.title="Required"),t.thumbnailUrl.length==0&&(r.thumbnailUrl="Required"),t.desc.length==0&&(r.desc="Required"),t.book.length==0&&(r.book="Required"),r};function W(){const t=B({initialValues:D,validate:V}),[r,d]=h.exports.useState(!1),[s,a]=h.exports.useState(!1),[l,o,c]=v(),f=N(),g=async p=>{if(p.preventDefault(),a(!0),!(t.errors.title||t.errors.desc||t.errors.thumbnailUrl||t.errors.book)){d(!0);let n=z(t.values.book);for(var b=[],u=0;u<n.length;u++)b.push(0);await x.firestore().collection(l.uid).doc().set({title:t.values.title,desc:t.values.desc,thumbnailUrl:t.values.thumbnailUrl,book:n,bookmarks:b}).then(m=>{console.log(m),f("/bookshelf",{replace:!0})}),d(!1)}};return i("div",{className:"flex flex-col items-center w-full mt-20",children:[e(S,{className:"h-20"}),e("div",{className:"w-full text-4xl font-bold flex justify-center items-center h-20 ",children:"Add New Book"}),i("div",{className:"ml-10 items-start flex flex-col w-60%",children:[e("div",{className:"text-2xl mb-2 ml-3",children:"Title"}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-7",children:e("input",{type:"text",placeholder:"Book Title",className:" text-2xl m-1 ml-3 outline-none w-full ",formNoValidate:!0,name:"title",onChange:t.handleChange,value:t.values.title,onBlur:t.handleBlur,autoFocus:!0})}),e("div",{className:"text-red-600 ml-4",children:t.errors.title}),e("div",{className:"text-2xl mb-2 ml-3",children:"Thumbnail URL"}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-7",children:e("input",{type:"url",placeholder:"Thumbnail URL",className:" text-2xl m-1 ml-3 outline-none w-full ",name:"thumbnailUrl",onChange:t.handleChange,value:t.values.thumbnailUrl,onBlur:t.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:t.errors.thumbnailUrl}),e("div",{className:"text-2xl mb-2 ml-3",children:"Description"}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-5",children:e("textarea",{className:" text-2xl m-1 ml-3 outline-none w-full",placeholder:"Description",name:"desc",maxLength:100,onChange:t.handleChange,value:t.values.desc,onBlur:t.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:t.errors.desc}),i("div",{className:"text-2xl mb-2 ml-3",children:["Book Content"," ",e("span",{className:"text-xl",children:"wrap chapter name with ```"})]}),e("div",{className:" border-2 border-black rounded-2xl w-full focus-within:border-blue-500 focus-within:border-3 pr-5",children:e("textarea",{className:" text-2xl m-1 ml-3 outline-none w-full ",placeholder:"Book Content (wrap chapter name with in ``` comas)",name:"book",onChange:t.handleChange,value:t.values.book,onBlur:t.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:t.errors.book})]}),e("div",{className:"text-2xl my-4 px-10 font-bold  bg-gray-500 hover:bg-black py-4 rounded-lg  w-1/5 text-white text-center",onClick:g,children:r?e("img",{src:y,height:"34px",width:"34px",alt:"loading",className:"mx-auto"}):"Add Book"})]})}const z=t=>{var r=[],d="",s="";let a=!1;for(let l=0;l<t.length;l++)t[l]==="`"&&t[l+1]==="`"&&t[l+2]==="`"?(a===!1?(a=!0,d!==""&&(r.push({content:s,chapterHeading:d}),d="",s="")):a=!1,l+=2):a?d+=t[l]:s+=t[l];return r.push({content:s,chapterHeading:d}),r},T={email:"",password:"",confirmPassword:""},$=t=>{let r={};const d=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.email.trim()?d.test(t.email.trim())||(r.email="Invalid email"):r.email="Email is required",t.password.length<8&&(r.password="Min length is 8"),t.confirmPassword.length<8?r.confirmPassword="Min length is 8":t.confirmPassword!==t.password&&(r.confirmPassword="MisMatch Password"),r};function q(){const[t,r,d]=v(),[s,a]=h.exports.useState(window.screen.width),l=N(),o=B({initialValues:T,validate:$}),[c,f]=h.exports.useState(!1),[g,p]=h.exports.useState(!1);window.addEventListener("resize",()=>{a(window.innerWidth)});const b=async u=>{u.preventDefault(),f(!0),o.errors.email||o.errors.password||o.errors.confirmPassword||(p(!0),await x.auth().createUserWithEmailAndPassword(o.values.email.trim(),o.values.password).then(n=>{var m=n.user;localStorage.setItem("bookshelfAuth",JSON.stringify({isSignedIn:!0,uid:m.multiFactor.user.uid})),r(m.multiFactor.user.uid),l("/bookshelf/books",{replace:!0})}).catch(n=>{console.log(n);var m=n.code,w=n.message;alert(m+" "+w)}),p(!1))};return e("div",{className:"w-screen h-screen flex justify-center items-center bg-green-700",children:i("div",{className:"flex w-5/6 h-5/6 bg-white rounded-3xl justify-center",children:[s>768&&e("div",{className:"bg-yellow-500 w-1/2 flex flex-col items-start justify-center rounded-l-3xl",children:i("div",{className:"mx-auto w-90%",children:[i("div",{className:"lg:text-6xl text-white md:text-4xl",children:[e("span",{className:"font-bold",children:"MY "}),"BookShelf"]}),e("div",{children:"Its not just a E-BookShelf ,its a way to wide breadth of information, experience, and knowledge."})]})}),i("div",{className:"flex flex-col items-center md:w-1/2 w-full h-full py-10 justify-evenly",children:[e("h1",{className:"font-bold text-4xl",children:"Create Account"}),i("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"email",placeholder:"E-Mail",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"email",onChange:o.handleChange,value:o.values.email,onBlur:o.handleBlur,autoFocus:!0})}),e("div",{className:"text-red-600 ml-4",children:c||o.touched.email?o.errors.email:""})]}),i("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"password",placeholder:"Password",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"password",onChange:o.handleChange,value:o.values.password,onBlur:o.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:c||o.touched.password?o.errors.password:""})]}),i("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"text",placeholder:"Confirm Password",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"confirmPassword",onChange:o.handleChange,value:o.values.confirmPassword,onBlur:o.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:c||o.touched.confirmPassword?o.errors.confirmPassword:""})]}),e("div",{className:"rounded-2xl bg-yellow-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer w-2/5 text-center",onClick:b,children:g?e("img",{src:y,height:"34px",width:"34px",alt:"loading",className:"mx-auto"}):"Sign Up"}),e("hr",{className:"border-t-2 border-gray-500 my-3 h-1 w-9/12"}),e("div",{className:"rounded-2xl bg-blue-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer w-2/5 text-center",onClick:()=>l("/bookshelf/signIn"),children:"Sign in"})]})]})})}const J={email:"",password:""},H=t=>{let r={};const d=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.email.trim()?d.test(t.email.trim())||(r.email="Invalid email"):r.email="Email is required",t.password.length<8&&(r.password="Min length is 8"),r};function Z(){const[t,r]=h.exports.useState(window.screen.width),d=N(),[s,a]=h.exports.useState(!1),l=B({initialValues:J,validate:H}),[o,c]=h.exports.useState(!1),[f,g,p]=v();window.addEventListener("resize",()=>{r(window.innerWidth)});const b=async u=>{u.preventDefault(),c(!0),l.errors.email||l.errors.password||(a(!0),await x.auth().signInWithEmailAndPassword(l.values.email.trim(),l.values.password).then(n=>{var m=n.user;localStorage.setItem("bookshelfAuth",JSON.stringify({isSignedIn:!0,uid:m.multiFactor.user.uid})),g(m.multiFactor.user.uid),d("/bookshelf/books",{replace:!0})}).catch(n=>{var m=n.code,w=n.message;alert(m+" "+w)}),a(!1))};return e("div",{className:"w-screen h-screen flex justify-center items-center bg-green-700",children:i("div",{className:"flex w-5/6 h-5/6 bg-white rounded-3xl justify-center",children:[t>768&&e("div",{className:"bg-yellow-500 w-1/2 flex flex-col items-start justify-center rounded-l-3xl",children:i("div",{className:"mx-auto w-90%",children:[i("div",{className:"lg:text-6xl text-white md:text-4xl",children:[e("span",{className:"font-bold",children:"MY "}),"BookShelf"]}),e("div",{children:"Its not just a E-BookShelf ,its a way to wide breadth of information, experience, and knowledge."})]})}),i("div",{className:"flex flex-col items-center md:w-1/2 w-full h-full py-10 justify-evenly",children:[e("h1",{className:"font-bold text-4xl",children:"Welcome Back"}),i("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"email",placeholder:"E-Mail",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"email",onChange:l.handleChange,value:l.values.email,onBlur:l.handleBlur,autoFocus:!0})}),e("div",{className:"text-red-600 ml-4",children:o||l.touched.email?l.errors.email:""})]}),i("div",{className:"mx-10",children:[e("div",{className:"border-2 border-black rounded-2xl focus-within:border-blue-500 lg:w-96 w-90%  focus-within:border-3",children:e("input",{type:"password",placeholder:"Password",className:" text-xl m-1 ml-3 outline-none w-11/12",formNoValidate:!0,name:"password",onChange:l.handleChange,value:l.values.password,onBlur:l.handleBlur})}),e("div",{className:"text-red-600 ml-4",children:o||l.touched.password?l.errors.password:""})]}),e("div",{className:"rounded-2xl bg-yellow-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer w-2/5 text-center",onClick:b,children:s?e("img",{src:y,height:"34px",width:"34px",alt:"loading",className:"mx-auto"}):"Sign In"}),e("hr",{className:"border-t-2 border-gray-500 my-3 h-1 w-9/12"}),e("div",{className:"rounded-2xl bg-blue-400 px-20 py-2 text-2xl font-bold text-white hover:text-black hover:border-black hover:border-2 cursor-pointer text-center w-2/5",onClick:()=>d("/bookshelf/signUp"),children:"Sign Up"})]})]})})}function _({data:t}){const r=N();return i("div",{className:"m-5 w-80 rounded-2xl overflow-hidden shadow-2xl border-2 border-black flex flex-col items-center justify-start pt-2 transform hover:scale-105 ",children:[e("div",{className:"h-50v w-11/12 flex justify-center",children:e("img",{className:"max-w-full max-h-full rounded-lg",src:t.data.thumbnailUrl,alt:"Sunset in the mountains",height:"300px"})}),i("div",{className:"px-6 py-4 w-full",children:[e("div",{className:"font-bold text-xl mb-2",children:String(t.data.title).substring(0,22)+"..."}),e("p",{className:"text-gray-700 text-sm break-all w-90%",children:String(t.data.desc).substring(0,100)+"..."}),e("div",{className:"flex justify-evenly mt-4",children:e("button",{className:"text-sm font-bold hover:text-white bg-green-400 py-4 rounded-lg  hover:bg-green-700 w-90%",onClick:()=>r(`/bookshelf/book/${t.id}`),children:"READ \u25BA"})})]})]})}async function K(t){return(await x.firestore().collection(t).get()).docs.map(d=>({id:d.id,data:d.data()}))}function Y(){const[t,r,d]=v(),[s,a]=h.exports.useState("loading"),l=t.uid;return h.exports.useEffect(()=>{l&&K(t.uid).then(o=>{a(o)})},[l]),i("div",{className:"mt-20",children:[e(S,{}),s==="loading"?e("div",{className:"h-80v w-full grid justify-center items-center",children:e("img",{src:y,alt:"loading",height:"200px",width:"200px"})}):s.length>0?e("div",{className:"flex flex-shrink-0 justify-center flex-wrap ",children:s.map(o=>e(_,{data:o},o.id))}):i("div",{className:"flex flex-col items-center font-bold justify-center absolute top-16 w-full bottom-0 text-4xl",children:["Empty",e("span",{className:" inline font-normal",children:"try adding some books"})]})]})}function X(){const t=localStorage.getItem("bookshelfAuth");return t&&JSON.parse(t).isSignedIn?e(j,{to:"/BookShelf/Books"}):e(j,{to:"/BookShelf/signIn"})}var G="/bookshelf/assets/bookmark.0f0f9df9.png",Q="/bookshelf/assets/bookmark-yellow.0a0f62b8.png";async function O(t,r){return(await x.firestore().collection(t).doc(r).get()).data()}function ee(){const[t,r,d]=v(),[s,a]=h.exports.useState("loading"),[l,o]=h.exports.useState(!1),{bookId:c}=P(),f=t.uid;let g=1;h.exports.useEffect(()=>(f&&c&&O(f,c).then(u=>{a(u),console.log(u)}),!1),[f,g]);const p=async u=>{const n=document.getElementById(c+u+"c");n&&(n.style.backgroundColor==="rgb(248, 255, 0)"?(s.bookmarks[u]=0,x.firestore().collection(f).doc(c).update({bookmarks:s.bookmarks})):(s.bookmarks[u]=1,x.firestore().collection(f).doc(c).update({bookmarks:s.bookmarks})),O(f,c).then(m=>{a(m)}))},b=document.documentElement.clientHeight;return window.addEventListener("scroll",()=>{s.book&&s.book.map((u,n)=>{const m=document.getElementById(c+n+"h"),w=document.getElementById(c+n+"hs");if(m&&w){const C=m.getBoundingClientRect().y;b>C&&C>-210?w.style.fontWeight="bold":w.style.fontWeight="normal"}})}),e("div",{children:s==="loading"?e("div",{className:"h-80v w-full grid justify-center items-center",children:e("img",{src:y,alt:"loading",height:"200px",width:"200px"})}):s?i("div",{className:"mt-20",children:[e(S,{}),i("div",{className:"w-full",children:[i("div",{className:"w-1/4 m-4 fixed break-all",children:[e("div",{className:" px-10 ml-4 mr-4 rounded-xl py-2 text-center text-xl font-bold text-white hover:bg-black cursor-pointer",style:{backgroundColor:l?"black":"rgb(156, 163, 175)"},onClick:()=>o(!l),children:"BookMarks"}),s.book.map((u,n)=>{if(!l||s.bookmarks[n]===1)return e("div",{className:"mt-4 ml-4 text-xl",id:c+n+"hs",children:u.chapterHeading},c+n+"hs")})]}),i("div",{className:"w-1/2 mx-auto",children:[e("img",{src:s.thumbnailUrl,className:"mt-4 ml-4"}),e("div",{className:"mt-4 ml-4 font-bold break-all text-2xl",children:s.title}),e("div",{className:"mt-4 ml-4 text-xl break-all",children:s.desc}),l&&i("div",{className:"mt-4 ml-4 font-bold break-all text-2xl",children:["Bookmarks"," "]}),e("div",{className:"mt-2 mb-4",children:s.book.map((u,n)=>{if(!l||s.bookmarks[n]===1)return i("div",{children:[i("div",{className:"flex justify-between items-center",children:[e("div",{className:"mt-4 ml-4 font-bold text-xl",id:c+n+"h",children:u.chapterHeading}),e("div",{children:e("img",{src:s.bookmarks[n]===0?G:Q,alt:"bookmark",height:"20px",width:"20px",onClick:()=>{p(n)}})})]}),e("div",{className:"mt-4 ml-4",id:c+n+"c",style:{backgroundColor:s.bookmarks[n]?"#F8FF00":"white"},children:u.content})]},c+n)})})]})]})]}):i("div",{children:[e(S,{}),e("div",{className:"flex flex-col items-center font-bold justify-center absolute top-16 w-full bottom-0 text-4xl",children:"No Book Found"})]})})}x.initializeApp({apiKey:"AIzaSyAC_pfgTeBv5eX-SAryBBV2hMm7t9nfbSo",authDomain:"bookshelf-7f547.firebaseapp.com",projectId:"bookshelf-7f547",storageBucket:"bookshelf-7f547.appspot.com",messagingSenderId:"37943744380",appId:"1:37943744380:web:beec8e86828960d25a36f9"});x.auth();function te(){return v(),e("div",{children:e(U,{children:i(L,{children:[e(k,{exact:!0,path:"/bookshelf/",element:e(X,{})}),e(k,{exact:!0,path:"/bookshelf/Books",element:e(Y,{})}),e(k,{exact:!0,path:"/bookshelf/SignUp",element:e(q,{})}),e(k,{exact:!0,path:"/bookshelf/SignIn",element:e(Z,{})}),e(k,{exact:!0,path:"/bookshelf/CreateNewBook",element:e(W,{})}),e(k,{exact:!0,path:"/bookshelf/book/:bookId",element:e(ee,{})})]})})})}M.render(e(A.StrictMode,{children:e(R,{children:e(te,{})})}),document.getElementById("root"));
